#!/usr/bin/env python3
# -*- coding: utf-8 -*-

"""
ุตูุญุฉ ุฅุนุฏุงุฏุงุช ุงูุชุทุจูู
"""

import streamlit as st
import sys
import os

# ุฅุถุงูุฉ ุงููุณุงุฑ ุงูุฑุฆูุณู ูููุดุฑูุน ุฅูู ูุณุงุฑ ุงูุจุญุซ
sys.path.append(os.path.abspath(os.path.join(os.path.dirname(__file__), "../..")))

from core.utils.config import ConfigManager

def render():
    """ุนุฑุถ ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช"""
    st.header("โ๏ธ ุฅุนุฏุงุฏุงุช ุงูุชุทุจูู")
    
    # ุชููุฆุฉ ูุฏูุฑ ุงูุชูููู
    config_manager = ConfigManager()
    
    # ุชูุณูู ุงูุดุงุดุฉ ุฅูู ุฃูุณุงู
    tabs = st.tabs(["ุฅุนุฏุงุฏุงุช ุนุงูุฉ", "ุฅุนุฏุงุฏุงุช ุงููููุฐุฌ", "ุฅุนุฏุงุฏุงุช ุงูุจุญุซ", "ุฅุนุฏุงุฏุงุช ุงููุณุชุฎุฏู", "ุญูู ุงูุชุทุจูู"])
    
    # ุฅุนุฏุงุฏุงุช ุนุงูุฉ
    with tabs[0]:
        st.subheader("ุงูุฅุนุฏุงุฏุงุช ุงูุนุงูุฉ")
        
        # ุงููุบุฉ
        language = st.selectbox(
            "ูุบุฉ ูุงุฌูุฉ ุงููุณุชุฎุฏู:",
            options=["ุงูุนุฑุจูุฉ", "English"],
            index=0
        )
        
        # ุงููุธูุฑ
        theme = st.radio(
            "ูุธูุฑ ุงูุชุทุจูู:",
            options=["ูุงุชุญ", "ุฏุงูู", "ุชููุงุฆู (ุญุณุจ ุฅุนุฏุงุฏุงุช ุงููุธุงู)"],
            index=2
        )
        
        # ุญุฌู ุงูุฎุท
        font_size = st.slider(
            "ุญุฌู ุงูุฎุท:",
            min_value=80,
            max_value=120,
            value=100,
            step=5,
            format="%d%%"
        )
        
        # ุฒุฑ ุญูุธ ุงูุฅุนุฏุงุฏุงุช ุงูุนุงูุฉ
        if st.button("ุญูุธ ุงูุฅุนุฏุงุฏุงุช ุงูุนุงูุฉ"):
            # ููุง ูููู ุญูุธ ุงูุฅุนุฏุงุฏุงุช ูู ููู ุงูุชูููู
            st.success("ุชู ุญูุธ ุงูุฅุนุฏุงุฏุงุช ุจูุฌุงุญ!")
    
    # ุฅุนุฏุงุฏุงุช ุงููููุฐุฌ
    with tabs[1]:
        st.subheader("ุฅุนุฏุงุฏุงุช ูููุฐุฌ ุงูุฐูุงุก ุงูุงุตุทูุงุนู")
        
        # ุงุฎุชูุงุฑ ุงููููุฐุฌ
        model_choice = st.selectbox(
            "ุงููููุฐุฌ ุงููุณุชุฎุฏู:",
            options=["mistral", "llama2:arabic", "llama2", "gemma"],
            index=0
        )
        
        # ูุนููุงุช ุงููููุฐุฌ
        temperature = st.slider(
            "ุฏุฑุฌุฉ ุงูุฅุจุฏุงุนูุฉ (Temperature):",
            min_value=0.0,
            max_value=1.0,
            value=0.7,
            step=0.1
        )
        
        max_tokens = st.slider(
            "ุงูุญุฏ ุงูุฃูุตู ููุฑููุฒ (Max Tokens):",
            min_value=256,
            max_value=4096,
            value=2048,
            step=256
        )
        
        # ุฒุฑ ุญูุธ ุฅุนุฏุงุฏุงุช ุงููููุฐุฌ
        if st.button("ุญูุธ ุฅุนุฏุงุฏุงุช ุงููููุฐุฌ"):
            # ุญูุธ ุฅุนุฏุงุฏุงุช ุงููููุฐุฌ
            st.session_state.model_choice = model_choice
            st.success("ุชู ุญูุธ ุฅุนุฏุงุฏุงุช ุงููููุฐุฌ ุจูุฌุงุญ!")
    
    # ุฅุนุฏุงุฏุงุช ุงูุจุญุซ
    with tabs[2]:
        st.subheader("ุฅุนุฏุงุฏุงุช ุงูุจุญุซ ูุงูุงุณุชุฑุฌุงุน")
        
        # ูููุฐุฌ ุงูุชุถููู
        embedding_model = st.selectbox(
            "ูููุฐุฌ ุงูุชุถููู:",
            options=[
                "paraphrase-multilingual-mpnet-base-v2",
                "sentence-transformers/paraphrase-arabic-mpnet-base-v2",
                "UBC-NLP/ARBERT"
            ],
            index=0
        )
        
        # ุฅุนุฏุงุฏุงุช ุงูุจุญุซ ุงูุฏูุงูู
        semantic_search_threshold = st.slider(
            "ุนุชุจุฉ ุงูุชุดุงุจู ุงูุฏูุงูู:",
            min_value=0.5,
            max_value=0.95,
            value=0.75,
            step=0.05
        )
        
        # ุฒุฑ ุญูุธ ุฅุนุฏุงุฏุงุช ุงูุจุญุซ
        if st.button("ุญูุธ ุฅุนุฏุงุฏุงุช ุงูุจุญุซ"):
            # ุญูุธ ุฅุนุฏุงุฏุงุช ุงูุจุญุซ
            st.success("ุชู ุญูุธ ุฅุนุฏุงุฏุงุช ุงูุจุญุซ ุจูุฌุงุญ!")
    
    # ุฅุนุฏุงุฏุงุช ุงููุณุชุฎุฏู
    with tabs[3]:
        st.subheader("ุฅุนุฏุงุฏุงุช ุงููุณุชุฎุฏู")
        
        # ูุนูููุงุช ุงููุณุชุฎุฏู
        st.markdown(f"**ูุนุฑู ุงููุณุชุฎุฏู**: {st.session_state.user_id}")
        
        # ุชุบููุฑ ูููุฉ ุงููุฑูุฑ (ููุชูุถูุญ ููุท)
        with st.form("change_password_form"):
            st.subheader("ุชุบููุฑ ูููุฉ ุงููุฑูุฑ")
            current_password = st.text_input("ูููุฉ ุงููุฑูุฑ ุงูุญุงููุฉ", type="password")
            new_password = st.text_input("ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ", type="password")
            confirm_password = st.text_input("ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ", type="password")
            
            submit_button = st.form_submit_button("ุชุบููุฑ ูููุฉ ุงููุฑูุฑ")
            
            if submit_button:
                if not current_password or not new_password or not confirm_password:
                    st.error("ูุฑุฌู ููุก ุฌููุน ุงูุญููู")
                elif new_password != confirm_password:
                    st.error("ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ ูุชุฃููุฏูุง ุบูุฑ ูุชุทุงุจููู")
                else:
                    # ููุง ูููู ุชูููุฐ ุชุบููุฑ ูููุฉ ุงููุฑูุฑ
                    st.success("ุชู ุชุบููุฑ ูููุฉ ุงููุฑูุฑ ุจูุฌุงุญ!")
        
        # ุญุฐู ุจูุงูุงุช ุงููุญุงุฏุซุฉ
        st.subheader("ุฅุฏุงุฑุฉ ุงูุจูุงูุงุช")
        if st.button("ุญุฐู ุณุฌู ุงููุญุงุฏุซุงุช"):
            # ุญุฐู ุณุฌู ุงููุญุงุฏุซุงุช
            if "messages" in st.session_state:
                st.session_state.messages = []
            st.success("ุชู ุญุฐู ุณุฌู ุงููุญุงุฏุซุงุช ุจูุฌุงุญ!")
    
    # ุญูู ุงูุชุทุจูู
    with tabs[4]:
        st.subheader("ุญูู ุงูุชุทุจูู")
        
        st.markdown("""
        ### ููุฑุดุฏ ุงููุฑุขู ุงูุฐูู ๐ง
        
        **ุงูุฅุตุฏุงุฑ**: 0.1.0
        
        **ูุตู ุงูุชุทุจูู**: ูุณุงุนุฏ ุฐูู ูุชุฎุตุต ูู ุงูุนููู ุงููุฑุขููุฉ ูุงูุฅุณูุงููุฉุ ูุฌูุน ุจูู ุชูููุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู ูุงูุจุญุซ ุงูุฏูุงูู ูุชูุฏูู ุชุฌุฑุจุฉ ุชูุงุนููุฉ ูุฑูุฏุฉ ููุจุงุญุซูู ูุงูููุชููู ุจุงูุนููู ุงูุฅุณูุงููุฉ.
        
        **ุงููููุฒุงุช ุงูุฑุฆูุณูุฉ**:
        - ูุญุงุฏุซุฉ ุฐููุฉ ูุน ูุธุงู ูุชุฎุตุต ูู ุงูุนููู ุงููุฑุขููุฉ
        - ุจุญุซ ุฏูุงูู ูุชูุฏู ูู ุงููุฑุขู ุงููุฑูู
        - ุงุณุชูุดุงู ุงููุนุฌุฒุงุช ุงูุนูููุฉ ูู ุงููุฑุขู
        - ุชุญููู ูุชูุฏู ูููุตูุต ุงููุฑุขููุฉ
        - ุงููุตูู ุฅูู ููุชุจุฉ ุดุงููุฉ ูู ุงููุฑุงุฌุน ุงูุฅุณูุงููุฉ
        
        **ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ**:
        - ููุงุฐุฌ ูุบููุฉ ูุชูุฏูุฉ (LLMs) ูุน ุฏุนู ููู ููุบุฉ ุงูุนุฑุจูุฉ
        - ุชูููุงุช ุงูุจุญุซ ุงูุฏูุงูู ูุงูุชุถููู ุงููุตู
        - ุงุณุชุฑุฌุงุน ุงููุนูููุงุช ุงููุนุฒุฒ ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู (RAG)
        - ุชุฎุฒูู ูุฅุฏุงุฑุฉ ุงูุฐุงูุฑุฉ ุงููุญููุฉ
        
        **ุงูุชุฑุฎูุต**: ูุฐุง ุงูุชุทุจูู ููุชูุญ ุงููุตุฏุฑ ุชุญุช ุฑุฎุตุฉ MIT
        
        **ุงููุทูุฑูู**: ูุฑูู ุชุทููุฑ ููุฑุดุฏ ุงููุฑุขู ุงูุฐูู
        """)
        
        # ุฑูุงุจุท ูููุฏุฉ
        st.subheader("ุฑูุงุจุท ูููุฏุฉ")
        st.markdown("""
        - [ุฏููู ุงููุณุชุฎุฏู](https://example.com/user-guide)
        - [ุงูุฅุจูุงุบ ุนู ูุดููุฉ](https://example.com/report-issue)
        - [ุงููุณุงููุฉ ูู ุงููุดุฑูุน](https://example.com/contribute)
        - [ุงููููุน ุงูุฑุณูู](https://example.com)
        """)


if __name__ == "__main__":
    # ูุฐุง ููุงุฎุชุจุงุฑ ุงููุณุชูู ููุท
    render()