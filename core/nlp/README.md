# مكتبة معالجة اللغة العربية الطبيعية (Arabic NLP Library)

مكتبة متخصصة لمعالجة اللغة العربية الطبيعية مع التركيز على التحليل الصرفي واستخراج الجذور والتعامل مع التشكيل.

## المكونات الرئيسية

تتكون المكتبة من ثلاثة مكونات رئيسية:

1. **معالج التشكيل** (`DiacriticsProcessor`): يوفر أدوات للتعامل مع علامات التشكيل في النصوص العربية مثل إزالة التشكيل، استخراج أنماط التشكيل، إضافة التشكيل البسيط.

2. **مستخرج الجذور** (`ArabicRootExtractor`): يوفر خوارزميات متعددة لاستخراج الجذور من الكلمات العربية بناءً على قواعد الصرف وتحليل السوابق واللواحق والأوزان الصرفية.

3. **محلل الصرف** (`ArabicMorphologyAnalyzer`): يقوم بتحليل بنية الكلمات العربية من الناحية الصرفية مثل تحديد نوع الكلمة (اسم، فعل، حرف) وتحديد الأوزان الصرفية وصيغ الأفعال.

## طريقة الاستخدام

### معالج التشكيل

```python
from core.nlp.diacritics import DiacriticsProcessor

# إنشاء كائن من معالج التشكيل
processor = DiacriticsProcessor()

# إزالة التشكيل
text = "بِسْمِ اللَّهِ الرَّحْمَنِ الرَّحِيمِ"
text_without_diacritics = processor.remove_all_diacritics(text)

# إزالة جميع علامات التشكيل ما عدا الشدة
text_with_shadda_only = processor.remove_except_shadda(text)

# التحقق من وجود تشكيل
has_diacritics = processor.has_diacritics(text)

# اقتراح تشكيل بسيط
simple_diacritics = processor.suggest_simple_diacritics("السلام عليكم ورحمة الله")
```

### مستخرج الجذور

```python
from core.nlp.root_extraction import ArabicRootExtractor

# إنشاء كائن من مستخرج الجذور
extractor = ArabicRootExtractor()

# استخراج جذر كلمة باستخدام الخوارزمية الهجينة (الأكثر دقة)
root = extractor.extract_root("يستغفرون", algorithm="hybrid")

# استخراج جذور جميع الكلمات في نص
text = "إنا أنزلناه قرآنا عربيا لعلكم تعقلون"
roots = extractor.extract_roots_from_text(text)

# تجميع الكلمات حسب جذورها
words = ["كتاب", "مكتبة", "كاتب", "قلم", "مقالة"]
grouped = extractor.group_by_root(words)
```

### محلل الصرف

```python
from core.nlp.morphology import ArabicMorphologyAnalyzer

# إنشاء كائن من محلل الصرف
analyzer = ArabicMorphologyAnalyzer()

# تحليل كلمة واحدة
analysis = analyzer.analyze_word("الكاتب")
# النتيجة تحتوي على: الجذر، الوزن، النوع، السوابق، اللواحق، معلومات إضافية

# تحليل نص كامل
text = "سافر الطلاب إلى المدرسة"
analysis_results = analyzer.analyze_text(text)

# البحث عن كلمات تطابق وزن معين
pattern_examples = analyzer.find_pattern_examples("فاعل", text)
```

## الخوارزميات المدعومة

### استخراج الجذور

تدعم المكتبة أربعة خوارزميات مختلفة لاستخراج الجذور:

1. **light**: خوارزمية أساسية تزيل السوابق واللواحق فقط.
2. **stem**: خوارزمية تجذيع (stemming) كاملة.
3. **pattern**: خوارزمية تعتمد على الأوزان الصرفية.
4. **hybrid**: مزيج من الخوارزميات السابقة (الأكثر دقة ولكن الأبطأ).

## الأوزان الصرفية المدعومة

تدعم المكتبة العديد من الأوزان الصرفية للأسماء والأفعال، بما في ذلك:

- أوزان الثلاثي المجرد (فَعَل، فَعِل، فَعُل، ...)
- أوزان مزيد الثلاثي (أفْعَل، فَعَّل، فاعَل، ...)
- أوزان الرباعي (فَعْلَل، فَعْلال، فِعْلال، ...)

## كيفية الاختبار

يمكن اختبار المكتبة باستخدام ملف الاختبار المرفق:

```bash
python -m core.nlp.test_nlp
```

## ملاحظات هامة

- المكتبة مصممة للعمل مع النصوص العربية الفصحى.
- دقة استخراج الجذور وتحليل الصرف تعتمد على الخوارزمية المستخدمة والسياق.
- بعض الحالات الخاصة مثل المعتل والمهموز قد تحتاج لمعالجة إضافية. 