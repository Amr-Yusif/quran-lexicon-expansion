# هيكل مشروع نظام استكشاف وتحليل النصوص الإسلامية المتكامل - منهجية TDD

## القواعد المنهجية للتطوير

يجب اتباع هذه القواعد بالترتيب المحدد دون الخروج عنها إلا بإذن صريح من قائد المشروع:

### 1. تحليل المتطلبات

- تحديد المتطلبات الوظيفية وغير الوظيفية بوضوح
- توثيق حالات الاستخدام والسيناريوهات المتوقعة
- تحديد أولويات المتطلبات (ضرورية، مهمة، مرغوبة)
- مراجعة المتطلبات مع أصحاب المصلحة

### 2. التصميم المبدئي

- تصميم هيكل البيانات والعلاقات
- تصميم واجهات البرمجة (APIs) الداخلية والخارجية
- تحديد التبعيات والمكتبات المطلوبة
- رسم مخططات تدفق البيانات والعمليات

### 3. كتابة الاختبارات أولاً (TDD)

- كتابة اختبارات الوحدة قبل تنفيذ الكود
- تحديد معايير النجاح لكل وظيفة
- تغطية جميع حالات الاستخدام والحالات الحدية
- التأكد من فشل الاختبارات قبل كتابة الكود (Red-Green-Refactor)

### 4. التنفيذ التدريجي

- تنفيذ الوظائف الأساسية أولاً
- الالتزام بمعايير كتابة الكود
- تنفيذ وحدة واحدة في كل مرة
- التأكد من نجاح الاختبارات بعد كل تنفيذ

### 5. إعادة الهيكلة المستمرة

- تحسين الكود دون تغيير وظائفه
- إزالة التكرار وتبسيط التعقيد
- تحسين قابلية القراءة والصيانة
- الحفاظ على نجاح جميع الاختبارات بعد إعادة الهيكلة

### 6. التوثيق الشامل

- توثيق واجهات البرمجة (API)
- كتابة تعليقات توضيحية للكود المعقد
- تحديث وثائق المستخدم
- توثيق القرارات التصميمية والتقنية

### 7. المراجعة والتحسين

- مراجعة الكود من قبل الزملاء
- قياس الأداء وتحسينه
- تحليل التغطية الاختبارية وزيادتها
- معالجة الديون التقنية

### 8. النشر والمراقبة

- إعداد بيئة النشر
- اختبار النشر في بيئة مشابهة للإنتاج
- مراقبة الأداء والأخطاء بعد النشر
- جمع تعليقات المستخدمين وتحليلها

## هيكل الملفات

islamic-text-analysis-system/
│
├── .env # ملف متغيرات البيئة
│
├── docker-compose.yml # ملف تكوين Docker Compose
│
├── requirements.txt # متطلبات Python
│
├── README.md # توثيق المشروع
│
├── app/ # تطبيق واجهة المستخدم
│ ├── assets/ # الأصول الثابتة
│ ├── pages/ # صفحات التطبيق المتعددة
│ │ ├── conversation.py # صفحة المحادثة
│ │ ├── search.py # صفحة البحث في القرآن
│ │ ├── miracles.py # صفحة المعجزات العلمية
│ │ ├── explorer.py # صفحة الاستكشاف المنهجي
│ │ └── settings.py # صفحة الإعدادات
│ ├── widgets/ # مكونات واجهة المستخدم
│ └── app.py # النقطة الرئيسية للتطبيق
│
├── core/ # نواة المشروع
│ ├── data_loaders/ # محملات البيانات
│ │ ├── quran_loader.py # محمل بيانات القرآن
│ │ ├── hadith_loader.py # محمل بيانات الحديث
│ │ └── pdf_loader.py # محمل ملفات PDF
│ │
│ ├── data/ # وحدات إدارة البيانات
│ │ └── local_storage.py # نظام التخزين المحلي
│ │
│ ├── ai/ # وحدات الذكاء الاصطناعي
│ │ └── local_memory_client.py # إدارة ذاكرة المحادثات المحلية
│ │
│ ├── embeddings/ # نماذج التضمين
│ │ └── embedding_models.py # نماذج التضمين المتخصصة
│ │
│ ├── rag/ # استرجاع المعلومات المعزز بالتوليد
│ │ ├── qdrant_manager.py # إدارة Qdrant المحلي
│ │ ├── qdrant_integration.py # تكامل Qdrant
│ │ └── multi_stage_retriever.py # استرجاع متعدد المراحل
│ │
│ ├── search/ # محركات البحث
│ │ └── semantic_search.py # البحث الدلالي المتقدم
│ │
│ ├── explorer/ # نظام الاستكشاف المنظم
│ │ ├── linguistic_analysis.py # تحليل لغوي
│ │ ├── pattern_discovery.py # اكتشاف الأنماط
│ │ ├── reasoning_engine.py # محرك الاستدلال
│ │ ├── systematic_explorer.py # المستكشف المنهجي
│ │ └── integrated_analysis.py # التحليل المتكامل
│ │
│ ├── analysis/ # وحدات التحليل المتقدم
│ │ ├── advanced_text_analysis.py # تحليل النصوص المتقدم
│ │ └── scientific_miracle_detector.py # كاشف المعجزات العلمية
│ │
│ ├── data_processing/ # معالجة البيانات
│ │ └── advanced_data_processor.py # معالج البيانات المتقدم
│ │
│ ├── media_processors/ # معالجة الوسائط المتعددة
│ │ ├── audio_processor.py # معالجة الصوت
│ │ ├── video_processor.py # معالجة الفيديو
│ │ └── document_processor.py # معالجة المستندات
│ │
│ └── utils/ # أدوات مساعدة
│   ├── arabic_text_utils.py # معالجة النصوص العربية
│   └── config.py # إدارة الإعدادات
│
├── data/ # البيانات
│ ├── quran/ # بيانات القرآن
│ ├── miracles/ # بيانات المعجزات العلمية
│ └── tafsir/ # بيانات التفاسير
│
├── scripts/ # سكريبتات مساعدة
│ ├── setup.sh # إعداد البيئة
│ ├── test_system.py # اختبار النظام
│ └── migrate_data.py # ترحيل البيانات
│
└── tests/ # اختبارات
├── unit/ # اختبارات الوحدات
├── integration/ # اختبارات التكامل
└── e2e/ # اختبارات من البداية للنهاية

## مكونات النظام المحدثة

### 1. نظام البحث الدلالي متعدد المراحل

تم تحديث نظام البحث الدلالي ليعمل على مراحل متعددة:

1. **مرحلة التحليل المسبق للاستعلام**: تحليل الاستعلام وتحديد المفاهيم الرئيسية.
2. **مرحلة استرجاع أولي**: استرجاع المستندات ذات الصلة باستخدام التشابه الدلالي.
3. **مرحلة تحليل السياق الديني والتاريخي**: فهم السياق الديني والتاريخي للاستعلام.
4. **مرحلة إعادة الترتيب**: إعادة ترتيب النتائج بناءً على المفاهيم والسياق.
5. **مرحلة ربط المفاهيم المتعلقة**: ربط النتائج بمفاهيم وموضوعات ذات صلة.
6. **مرحلة الإثراء**: إثراء النتائج بمعلومات إضافية وسياق أوسع.
7. **مرحلة تقييم النتائج**: تقييم النتائج وترتيبها حسب الأهمية والصلة.

### 2. نظام الاستكشاف المنهجي

تم تطوير نظام استكشاف منهجي يتضمن:

- **تحليل النمط اللغوي والبلاغي**: تحليل الأساليب اللغوية والبلاغية في النصوص القرآنية.
- **اكتشاف العلاقات بين المفاهيم**: تحديد وتوثيق العلاقات بين المفاهيم القرآنية المختلفة.
- **تتبع تطور المفاهيم**: تتبع كيفية تطور المفاهيم والموضوعات عبر السور والآيات.
- **توليد فرضيات قابلة للاختبار**: إنشاء فرضيات علمية قابلة للاختبار بناءً على التحليل.

### 3. لوحة تحكم تطوير المعرفة

تم إضافة لوحة تحكم لتطوير المعرفة تتضمن:

- **عرض مرئي للمفاهيم والعلاقات**: تمثيل بصري للمفاهيم والعلاقات بينها.
- **تتبع تقدم الاستكشاف**: أدوات لتتبع تقدم عملية الاستكشاف والتحليل.
- **تنظيم وتصنيف المعرفة**: أدوات لتنظيم وتصنيف المعرفة المكتشفة.
- **مشاركة الاكتشافات**: واجهة لمشاركة الاكتشافات والتعاون مع الآخرين.

### 4. معالجة الوسائط المتعددة

تم إضافة دعم لتحليل ومعالجة الوسائط المتعددة:

- **معالجة ملفات الصوت**: تحليل التلاوات والمحاضرات الصوتية.
- **معالجة ملفات الفيديو**: تحليل الدروس والمؤتمرات المرئية.
- **معالجة الصور والمخططات**: تحليل الرسوم البيانية والمخططات التوضيحية.
- **معالجة المستندات المتنوعة**: دعم تحليل المستندات بتنسيقات متعددة.

### 5. نظام Qdrant المحلي

تم تحديث النظام ليستخدم خادم Qdrant محلي بدلاً من الخدمة السحابية:

- يعمل Qdrant في حاوية Docker محلية.
- يتم توفير URL وAPI Key من خلال متغيرات البيئة.
- أداء أفضل وتحكم أكبر في البيانات والإعدادات.

### 3. متغيرات البيئة المضافة

تم إضافة متغيرات بيئة جديدة في ملف `.env`:

```
QDRANT_URL=http://localhost:6333
QDRANT_API_KEY=
```

## نموذج الاشتراكات

1. **الخطة المجانية**:

   - بحث محدود في القرآن وال
